

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Developer API &mdash; atomics 0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/jupyter-sphinx.css" type="text/css" />
  <link rel="stylesheet" href="../_static/thebelab.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/thebelab-helper.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Adding additional design variables, constraints, or changing to a different objective" href="extensions_folder/new_opt.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> atomics
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="solution.html">Steps for solving a topology optimization problem in ATOMiCS</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples library</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods.html">Density-based methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="pdes.html">PDE library</a></li>
<li class="toctree-l1"><a class="reference internal" href="extension.html">Advanced user guide—extensions for ATOmiCS toolbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="extension.html#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Developer API</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">atomics</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Developer API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/_src_docs/api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="developer-api">
<h1>Developer API<a class="headerlink" href="#developer-api" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="atomics.pde_problem.PDEProblem">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">atomics.pde_problem.</span></code><code class="sig-name descname"><span class="pre">PDEProblem</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mesh</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#atomics.pde_problem.PDEProblem" title="Permalink to this definition">¶</a></dt>
<dd><p>PDEProblem is a class containing the mesh and the dictionaries of
the boundary conditions, inputs, states, and outputs.</p>
</dd></dl>

<dl class="py class">
<dt id="atomics.atomics_group.AtomicsGroup">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">atomics.atomics_group.</span></code><code class="sig-name descname"><span class="pre">AtomicsGroup</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#atomics.atomics_group.AtomicsGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>The AtomicsGroup is a OpenMDAO Group object that wraps the assembly of OpenMDAO components.
Within <code class="docutils literal notranslate"><span class="pre">AtomicsGroup</span></code>, the users can choose the <code class="docutils literal notranslate"><span class="pre">pde_problem</span></code>, 
<code class="docutils literal notranslate"><span class="pre">linear_solver_</span></code> (for the solution total derivatives), the`` problem_type``, 
and whether to turn on the <code class="docutils literal notranslate"><span class="pre">visualization</span></code> option.
problem.
Parameters
———-
<code class="docutils literal notranslate"><span class="pre">linear_solver_</span></code>   solver for the total derivatives
default=’petsc_cg_ilu’, 
values=[‘fenics_direct’, ‘scipy_splu’, ‘fenics_krylov’, ‘petsc_gmres_ilu’, ‘scipy_cg’,’petsc_cg_ilu’]</p>
<p><code class="docutils literal notranslate"><span class="pre">problem_type</span></code>    solver for the FEA problem
default=’nonlinear_problem’, 
values=[‘linear_problem’, ‘nonlinear_problem’, ‘nonlinear_problem_load_stepping’]</p>
<p><code class="docutils literal notranslate"><span class="pre">visualization</span></code>    whether to save the iteration histories
default=’False’, 
values=[‘True’, ‘False’],</p>
<dl class="py method">
<dt id="atomics.atomics_group.AtomicsGroup.initialize">
<code class="sig-name descname"><span class="pre">initialize</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#atomics.atomics_group.AtomicsGroup.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform any one-time initialization run at instantiation.</p>
</dd></dl>

<dl class="py method">
<dt id="atomics.atomics_group.AtomicsGroup.setup">
<code class="sig-name descname"><span class="pre">setup</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#atomics.atomics_group.AtomicsGroup.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Build this group.</p>
<p>This method should be overidden by your Group’s method. The reason for using this
method to add subsystem is to save memory and setup time when using your Group
while running under MPI.  This avoids the creation of systems that will not be
used in the current process.</p>
<p>You may call ‘add_subsystem’ to add systems to this group. You may also issue connections,
and set the linear and nonlinear solvers for this group level. You cannot safely change
anything on children systems; use the ‘configure’ method instead.</p>
<dl class="simple">
<dt>Available attributes:</dt><dd><p>name
pathname
comm
options</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="atomics.states_comp.StatesComp">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">atomics.states_comp.</span></code><code class="sig-name descname"><span class="pre">StatesComp</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#atomics.states_comp.StatesComp" title="Permalink to this definition">¶</a></dt>
<dd><p>StatesComp is a OpenMDAO  implicit component, which wraps the FEniCS PDE solver.
The total derivatives are also calculated in StatesComp.
problem.
The users do not need to modify StatesComp ideally. 
The same settings can be modified in AtomicsGroup() 
from the run file.
Parameters
———-
<code class="docutils literal notranslate"><span class="pre">linear_solver_</span></code> solver for the total derivatives
values=[‘fenics_direct’, ‘scipy_splu’, ‘fenics_krylov’, ‘petsc_gmres_ilu’, ‘scipy_cg’,’petsc_cg_ilu’]
<code class="docutils literal notranslate"><span class="pre">problem_type</span></code> solver for the FEA problem
values=[‘linear_problem’, ‘nonlinear_problem’, ‘nonlinear_problem_load_stepping’]
<code class="docutils literal notranslate"><span class="pre">visualization</span></code> whether to save the iteration histories
values=[‘True’, ‘False’],
Returns
——-
outputs[‘state_name’] : numpy array</p>
<blockquote>
<div><p>states</p>
</div></blockquote>
<dl class="py method">
<dt id="atomics.states_comp.StatesComp.apply_nonlinear">
<code class="sig-name descname"><span class="pre">apply_nonlinear</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">residuals</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#atomics.states_comp.StatesComp.apply_nonlinear" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute residuals given inputs and outputs.</p>
<p>The model is assumed to be in an unscaled state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>inputs</strong><span class="classifier">Vector</span></dt><dd><p>unscaled, dimensional input variables read via inputs[key]</p>
</dd>
<dt><strong>outputs</strong><span class="classifier">Vector</span></dt><dd><p>unscaled, dimensional output variables read via outputs[key]</p>
</dd>
<dt><strong>residuals</strong><span class="classifier">Vector</span></dt><dd><p>unscaled, dimensional residuals written to via residuals[key]</p>
</dd>
<dt><strong>discrete_inputs</strong><span class="classifier">dict or None</span></dt><dd><p>If not None, dict containing discrete input values.</p>
</dd>
<dt><strong>discrete_outputs</strong><span class="classifier">dict or None</span></dt><dd><p>If not None, dict containing discrete output values.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="atomics.states_comp.StatesComp.initialize">
<code class="sig-name descname"><span class="pre">initialize</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#atomics.states_comp.StatesComp.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform any one-time initialization run at instantiation.</p>
</dd></dl>

<dl class="py method">
<dt id="atomics.states_comp.StatesComp.linearize">
<code class="sig-name descname"><span class="pre">linearize</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partials</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#atomics.states_comp.StatesComp.linearize" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute sub-jacobian parts and any applicable matrix factorizations.</p>
<p>The model is assumed to be in an unscaled state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>inputs</strong><span class="classifier">Vector</span></dt><dd><p>unscaled, dimensional input variables read via inputs[key]</p>
</dd>
<dt><strong>outputs</strong><span class="classifier">Vector</span></dt><dd><p>unscaled, dimensional output variables read via outputs[key]</p>
</dd>
<dt><strong>jacobian</strong><span class="classifier">Jacobian</span></dt><dd><p>sub-jac components written to jacobian[output_name, input_name]</p>
</dd>
<dt><strong>discrete_inputs</strong><span class="classifier">dict or None</span></dt><dd><p>If not None, dict containing discrete input values.</p>
</dd>
<dt><strong>discrete_outputs</strong><span class="classifier">dict or None</span></dt><dd><p>If not None, dict containing discrete output values.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="atomics.states_comp.StatesComp.setup">
<code class="sig-name descname"><span class="pre">setup</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#atomics.states_comp.StatesComp.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Declare inputs and outputs.</p>
<dl class="simple">
<dt>Available attributes:</dt><dd><p>name
pathname
comm
options</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="atomics.states_comp.StatesComp.solve_linear">
<code class="sig-name descname"><span class="pre">solve_linear</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d_outputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d_residuals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#atomics.states_comp.StatesComp.solve_linear" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply inverse jac product. The model is assumed to be in an unscaled state.</p>
<dl>
<dt>If mode is:</dt><dd><p>‘fwd’: d_residuals |-&gt; d_outputs</p>
<p>‘rev’: d_outputs |-&gt; d_residuals</p>
</dd>
</dl>
<p>Note : this is not the linear solution for the implicit component. We use identity so
that simple implicit components can function in a preconditioner under linear gauss-seidel.
To correctly solve this component, you should slot a solver in linear_solver or override
this method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>d_outputs</strong><span class="classifier">Vector</span></dt><dd><p>unscaled, dimensional quantities read via d_outputs[key]</p>
</dd>
<dt><strong>d_residuals</strong><span class="classifier">Vector</span></dt><dd><p>unscaled, dimensional quantities read via d_residuals[key]</p>
</dd>
<dt><strong>mode</strong><span class="classifier">str</span></dt><dd><p>either ‘fwd’ or ‘rev’</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="atomics.states_comp.StatesComp.solve_nonlinear">
<code class="sig-name descname"><span class="pre">solve_nonlinear</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#atomics.states_comp.StatesComp.solve_nonlinear" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute outputs given inputs. The model is assumed to be in an unscaled state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>inputs</strong><span class="classifier">Vector</span></dt><dd><p>unscaled, dimensional input variables read via inputs[key]</p>
</dd>
<dt><strong>outputs</strong><span class="classifier">Vector</span></dt><dd><p>unscaled, dimensional output variables read via outputs[key]</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="extensions_folder/new_opt.html" class="btn btn-neutral float-left" title="Adding additional design variables, constraints, or changing to a different objective" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, LSDO Lab, UCSD.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>